(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],[,,,,,,,,function(e,t,n){e.exports=n.p+"static/media/smile.985edeb5.svg"},function(e,t,n){e.exports=n.p+"static/media/meh.b7a92f62.svg"},function(e,t,n){e.exports=n.p+"static/media/frown.7ab58022.svg"},function(e,t,n){e.exports=n.p+"static/media/flag.e82605c7.svg"},,,function(e,t,n){e.exports=n(22)},,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),a=n(4),o=n.n(a),u=(n(19),n(2)),l=n(5),s=n(6),c=n(12),f=n(7),h=n(1),d=n(13),g=(n(20),n(8)),v=n.n(g),m=n(9),p=n.n(m),b=n(10),k=n.n(b),y=n(11),C=n.n(y),w=n(21).List,E=[[k.a,"You have one life; be careful"],[p.a,"You have two lives"],[v.a,"You have three lives"]],M={0:"white",1:"#b3ffb3",2:"#4dff4d",3:"#ffff00",4:"#ffcc00",5:"#ff9933",6:"#ff6600",7:"#ff3300",8:"#ff0000"};function S(e){var t=e.touched,n=e.flagged,i=e.mine,a=e.value,o=e.onClick,u=e.onContextMenu,l=M[a],s=t?a:"",c=a>3?"bold":"normal";if(n)return r.a.createElement("img",{className:"tile tileImg",src:C.a,alt:"This tile has been flagged as a mine",onContextMenu:u});var f="";return f=t?i?"mine":"touched":"untouched",r.a.createElement("button",{className:"tile tileBtn ".concat(f),onContextMenu:u,style:{color:l,fontWeight:c},onClick:o,disabled:t},s)}var B=function(e){function t(e){var n;Object(l.a)(this,t);var i=(n=Object(c.a)(this,Object(f.a)(t).call(this,e))).createBoard(e.size,.2).reduce((function(e,t){return e+t.filter((function(e){return!e.mine})).length}));return n.state={flash:!1,lives:2,size:e.size,grid:n.createBoard(e.size,.2),safeSpaces:i},n.resetBoard=n.resetBoard.bind(Object(h.a)(n)),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"onGameEnd",value:function(){var e=this.state.grid;e.map((function(e){return e.map((function(e){return e.touched=!0,e}))})),this.setState({grid:e}),setTimeout(this.resetBoard,3e3)}},{key:"newCell",value:function(e){return{mine:e,touched:!1,flagged:!1}}},{key:"getSurroundingNeighbors",value:function(e,t,n){return Array(8).fill(null).map((function(e,t){return t*Math.PI/4})).map((function(n){return[e+Math.round(Math.sin(n)),t+Math.round(Math.cos(n))]})).filter((function(e){return e.every((function(e){return 0<=e&&e<n}))}))}},{key:"getMinedNeighbors",value:function(e,t,n){var i=e.length;return e[t][n].minedNeighbors=this.getSurroundingNeighbors(t,n,i).filter((function(t){var n=Object(u.a)(t,2),i=n[0],r=n[1];return e[i][r].mine})).length}},{key:"revealCell",value:function(e,t,n){return e[t][n].minedNeighbors>0?w([[t,n]]):this.revealCellsRecursively(e,t,n,w())}},{key:"revealCellsRecursively",value:function(e,t,n,i){var r=this;if(e[t][n].minedNeighbors>0)return i.push(w([t,n]));var a;return a=function(r){var a=Object(u.a)(r,2),o=a[0],l=a[1];return!e[o][l].mine&&!e[o][l].touched&&!i.includes(w([t,n]))},this.getSurroundingNeighbors(t,n,e.length).filter((function(e){return a(e)})).reduce((function(t,n){return r.revealCellsRecursively(e,n[0],n[1],t)}),i.push(w([t,n])))}},{key:"createBoard",value:function(e,t){for(var n=this,i=Array(e).fill(null).map((function(i){return Array(e).fill(null).map((function(e){return n.newCell(Math.random()<t)}))})),r=0;r<e;r++)for(var a=0;a<e;a++)i[r][a].minedNeighbors=this.getMinedNeighbors(i,r,a);return i}},{key:"remainingCells",value:function(e){return e.reduce((function(e,t){return e+t.filter((function(e){return!e.mine&&e.touched})).length}))}},{key:"handleRightClick",value:function(e,t,n){n.preventDefault();var i=this.state.grid;i[e][t].flagged=!i[e][t].flagged,this.setState({grid:i}),console.log("right click")}},{key:"handleClick",value:function(e,t){var n=this.state.grid,i=n[e][t];if(i.mine){if(0===this.state.lives)return void this.onGameEnd();this.setState((function(e,t){return{lives:e.lives-1}}))}i.touched||(this.revealCell(n,e,t).forEach((function(e){var t=Object(u.a)(e,2),i=t[0],r=t[1];n[i][r].touched=!0})),0===this.remainingCells(n)&&alert("Congratulations!"),this.setState({grid:n,flash:i.mine}))}},{key:"resetBoard",value:function(){var e=this.createBoard(this.state.size,.2),t=e.reduce((function(e,t){return e+t.filter((function(e){return!e.mine})).length}));this.setState({grid:e,safeSpaces:t,flash:!1,lives:2})}},{key:"render",value:function(){var e=this,t=this.state.grid,n=E[this.state.lives][0],i=E[this.state.lives][1],a=this.state.flash;return r.a.createElement("div",null,t.map((function(n,i){return r.a.createElement("div",{key:i},n.map((function(n,a){return r.a.createElement(S,{flagged:t[i][a].flagged,onContextMenu:function(t){return e.handleRightClick(i,a,t)},onClick:function(){return e.handleClick(i,a)},key:a,mine:n.mine,touched:n.touched,value:n.minedNeighbors})})))})),r.a.createElement("img",{id:a?"statusFlashing":"statusStatic",onAnimationEnd:function(){return e.setState({flash:!1})},src:n,alt:i}))}}]),t}(r.a.Component);var N=function(){return r.a.createElement("div",{id:"App"},r.a.createElement("h1",null,"Mine Sweeper"),r.a.createElement("a",{href:"https://github.com/TCooper1996/MineSweeper/",id:"info"},"github"),r.a.createElement("div",{id:"Board"},r.a.createElement(B,{size:10})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[14,1,2]]]);
//# sourceMappingURL=main.f2996064.chunk.js.map